{% load sass_tags %}
{% load static %}
<div class="right-bar">
    <div class="history-content">
        <div class="history-content-top">
            <div class="history-content-top-left">
                <i class="fa-solid fa-clock-rotate-left"></i>
            </div>
            <div class="history-content-top-mid">
                <p>Listening history</p>
            </div>
            <div class="history-content-top-right">
                <a href="{% url 'history' %}">View all</a>
            </div>
        </div>
        <div class="history-content-bottom">
            {% if is_creator and user_history %}
                {% for song in songs %}
                    <div class="song">
                        <div class="song-img">
                            <img src="{{ song.music.img.url }}" alt="{{ song.music.name }}">
                        </div>
                        <div class="song-detail">
                            <div class="song-artist">
                                <p>{{ song.music.author }}</p>
                            </div>
                            <div class="song-name">
                                <p>{{ song.music.name }}</p>
                            </div>
                            <div class="song-react">
                                <i class="fa-solid fa-play">
                                    <form method="post" action="{% url 'save_to_history' music_id=song.music_id %}">
                                        {% csrf_token %}
                                        <button type="submit" class="play-btn" data-file="{{ song.music.upload_file.url }}" data-name="{{ song.music.name }}" data-author="{{ song.music.author }}" data-img="{{ song.music.img.url }}"></button>
                                    </form>
                                </i>
                                <i class="fa-regular fa-heart"></i>
                                <i class="fa-regular fa-comment"></i>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <p>No history available.</p>
                {% endfor %}
            {% endif %}
        </div>
    </div>
    <div class="friend-content">
        <div class="friend-content-top">
            <div class="friend-content-top-left">
                <i class="fa-solid fa-user"></i>
            </div>
            <div class="friend-content-top-mid">
                <p>Friends</p>
            </div>
            <div class="friend-content-top-right">
                <p>View all</p>
            </div>
        </div>
        <div class="user">
            <div class="user-img"><img src="{% static 'img/user.jpg' %}" alt="lumine"></div>
            <div class="user-detail">
                <div class="user-name"><p> Dung mang com suon </p></div>
                <div class="user-data">
                    <i class="fa-solid fa-user" style="top: 5px; position: relative;"></i>
                    <i class="fa-solid fa-music" style="top: 5px; position: relative;"></i>
                    <button class="btn-follow">
                        <div class="btn-content">
                            <i class="fa-solid fa-user"></i> Following
                        </div>
                    </button>
                </div>
            </div>
        </div>
        <div class="user">
            <div class="user-img"><img src="{% static 'img/user.jpg' %}" alt="lumine"></div>
            <div class="user-detail">
                <div class="user-name"><p> Dung mang com suon </p></div>
                <div class="user-data">
                    <i class="fa-solid fa-user" style="top: 5px; position: relative;"></i>
                    <i class="fa-solid fa-music" style="top: 5px; position: relative;"></i>
                    <button class="btn-follow">
                        <div class="btn-content">
                            <i class="fa-solid fa-user"></i> Following
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="contact-content"></div>
</div> 